<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<!--

  @(#)package.html	1 Fri March 3 15:06:49 CDT 2006

  Copyright 2006 Board of Regents, University of Wisconsin,
  Madison, Wisconsin, U.S.A. All Rights Reserved.

-->
  <TITLE>SANS package</TITLE>
</head>
<body bgcolor="white">

<P>
  Simple API for NMR-STAR.

<h2>Package Details</h2>
<P>
  SANS (Simple API for NMR-STAR) is modelled after Simple API for XML (SAX). 
  Like SAX parsers, SANS parses input line-by-line and calls user-defined 
  methods (callbacks) for each element of NMR-STAR syntax it encouters.
<P>
  SANS is much faster, and requires far less memory than the DOM-like STAR 
  parser: starlib. Of course, SANS comes with all limitations of SAX parsers.

<H2>Callbacks</H2>
<P>
 Callbacks are similar to those in <CODE>org.xml.sax</CODE>. They are defined
 in two interfaces: {@link edu.bmrb.sans.ErrorHandler ErrorHandler} for parser
 errors and warnings, and <CODE>ContentHandler</CODE> interfaces.
<P>
 All callbacks except <CODE>fatalError</CODE> and end-of-input return a boolean
 "stop": true to stop the parser, false to continue.

<H3>Error callbacks</H3>
<P>
 Unlike the <CODE>org.xml.sax</CODE> ones, error callbacks are called with
 line and column number of input file where error occured, and the error message.
 {@link edu.bmrb.sans.ErrorHandler#fatalError(int, int, String) fatalError()} is
 typically called on scanner (lexer) errors,
 {@link edu.bmrb.sans.ErrorHandler#error(int, int, String) error()} is called
 on NMR-STAR syntax errors, and 
 {@link edu.bmrb.sans.ErrorHandler#warning(int, int, String) warning()} is
 usually called on short loop reads and possible unmatched semicolons (delimiters).

<H3>Content callbacks</H3>
<P>
 There are two content callback interfaces:
 <UL>
  <LI>{@link edu.bmrb.sans.ContentHandler ContentHandler} returns tag/value pairs
      as {@link edu.bmrb.sans.DataItemNode DataItemNode} object,<LI>
  <LI>{@link edu.bmrb.sans.ContentHandler2 ContentHandler2} defines separate callbacks
      for tags and values.</LI>
 </UL>
<P>
 {@link edu.bmrb.sans.DataItemNode DataItemNode} object used by the former has a 
 boolean "loop" flag to distinguish free tag/values from loop tag/values.
<P>
 <STRONG>Note</STRONG> that content handler interfaces do not define callbacks
 for start and end of STAR "global blocks". I don't know if anyone is actually
 using them.

<H2>Classes</H2> 

<H3>{@link edu.bmrb.sans.STARLexer STARLexer}</H3>
<P>
 Scanner generated by JFlex. The scanner returns STAR tokens as 
 {@link edu.bmrb.sans.STARLexer.Types STARLexer.Types} enumeration.
<P>
 <STRONG>Note</STRONG>: the scanner does not close input stream on
 EOF. This allows user to rewind and re-parse existing input stream.

<H3>Parsers</H3>
<P>
 Parsers are hand-written because STAR syntax is very simple. There are
 several parsers in the package (validating NMR-STAR parsers, mmCIF parser,
 etc.) If you don't see a parser that does exactly what you need here, use
 one of the existing ones as template and roll your own (parsers written for
 specific purpose should probably not be placed in this package).
<P>
 <STRONG>Note that</STRONG>
 <UL>
  <LI>Not all callbacks are used by all parsers, e.g. an mmCIF parser would never
      call start and end of a saveframe since CIF does not use saveframes. CIF
      parser in this package still requires the user to implement those callbacks
      (as simple <CODE>return false;</CODE> one-liners).</LI>
  <LI>Some of the content callbacks do not have corresponding elements in STAR
      syntax (e.g. end of data block is implicit in STAR, end of loop marker
      is optional in top-level loops). These callbacks are triggered by the parser
      rather than STAR lexer.</LI>
 </UL>
<HR>
</body>
</html>
